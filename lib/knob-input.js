window.KnobInput=function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1);class s{constructor(t,e){e||(e={});var i=e.step||"any",a="number"==typeof e.min?e.min:0,u="number"==typeof e.max?e.max:1;this.initial="number"==typeof e.initial?e.initial:.5*(a+u),this.visualElementClass=e.visualElementClass||"control-knob__visual",this.dragResistance="number"==typeof e.dragResistance?e.dragResistance:300,this.dragResistance/=u-a,this.wheelResistance="number"==typeof e.wheelResistance?e.wheelResistance:4e3,this.wheelResistance/=u-a,this.setupVisualContext="function"==typeof e.visualContext?e.visualContext:s.setupRotationContext(0,360),this.updateVisuals="function"==typeof e.updateVisuals?e.updateVisuals:s.rotationUpdateFunction;var h=document.createElement("input");h.type="range",h.step=i,h.min=a,h.max=u,h.value=this.initial,t.appendChild(h),this._container=t,this._container.classList.add("control-knob"),this._input=h,this._input.classList.add("control-knob__input"),this._visualElement=this._container.querySelector(`.${this.visualElementClass}`),this._visualElement.classList.add("control-knob__visual"),this._visualContext={element:this._visualElement,transformProperty:Object(n.a)()},this.setupVisualContext.apply(this._visualContext),this.updateVisuals=this.updateVisuals.bind(this._visualContext),this._activeDrag=!1,this._handlers={inputChange:this.handleInputChange.bind(this),touchStart:this.handleTouchStart.bind(this),touchMove:this.handleTouchMove.bind(this),touchEnd:this.handleTouchEnd.bind(this),touchCancel:this.handleTouchCancel.bind(this),mouseDown:this.handleMouseDown.bind(this),mouseMove:this.handleMouseMove.bind(this),mouseUp:this.handleMouseUp.bind(this),mouseWheel:this.handleMouseWheel.bind(this),doubleClick:this.handleDoubleClick.bind(this),focus:this.handleFocus.bind(this),blur:this.handleBlur.bind(this)},this._input.addEventListener("change",this._handlers.inputChange),this._input.addEventListener("touchstart",this._handlers.touchStart),this._input.addEventListener("mousedown",this._handlers.mouseDown),this._input.addEventListener("wheel",this._handlers.mouseWheel),this._input.addEventListener("dblclick",this._handlers.doubleClick),this._input.addEventListener("focus",this._handlers.focus),this._input.addEventListener("blur",this._handlers.blur),this.updateToInputValue()}static setupRotationContext(t,e){return function(){this.minRotation=t,this.maxRotation=e}}static rotationUpdateFunction(t){this.element.style[this.transformProperty]=`rotate(${this.maxRotation*t-this.minRotation*(t-1)}deg)`}handleInputChange(t){this.updateToInputValue()}handleTouchStart(t){this.clearDrag(),t.preventDefault();var e=t.changedTouches.item(t.changedTouches.length-1);this._activeDrag=e.identifier,this.startDrag(e.clientY),document.body.addEventListener("touchmove",this._handlers.touchMove),document.body.addEventListener("touchend",this._handlers.touchEnd),document.body.addEventListener("touchcancel",this._handlers.touchCancel)}handleTouchMove(t){var e=this.findActiveTouch(t.changedTouches);e?this.updateDrag(e.clientY):this.findActiveTouch(t.touches)||this.clearDrag()}handleTouchEnd(t){var e=this.findActiveTouch(t.changedTouches);e&&this.finalizeDrag(e.clientY)}handleTouchCancel(t){this.findActiveTouch(t.changedTouches)&&this.clearDrag()}handleMouseDown(t){this.clearDrag(),t.preventDefault(),this._activeDrag=!0,this.startDrag(t.clientY),document.body.addEventListener("mousemove",this._handlers.mouseMove),document.body.addEventListener("mouseup",this._handlers.mouseUp)}handleMouseMove(t){1&t.buttons?this.updateDrag(t.clientY):this.finalizeDrag(t.clientY)}handleMouseUp(t){this.finalizeDrag(t.clientY)}handleMouseWheel(t){this._input.focus(),this.clearDrag(),this._prevValue=parseFloat(this._input.value),this.updateFromDrag(t.deltaY,this.wheelResistance)}handleDoubleClick(t){this.clearDrag(),this._input.value=this.initial,this.updateToInputValue()}handleFocus(t){this._container.classList.add("focus-active")}handleBlur(t){this._container.classList.remove("focus-active")}startDrag(t){this._dragStartPosition=t,this._prevValue=parseFloat(this._input.value),this._input.focus(),document.body.classList.add("control-knob__drag-active"),this._container.classList.add("drag-active")}updateDrag(t){var e=t-this._dragStartPosition;this.updateFromDrag(e,this.dragResistance),this._input.dispatchEvent(new InputEvent("change"))}finalizeDrag(t){var e=t-this._dragStartPosition;this.updateFromDrag(e,this.dragResistance),this.clearDrag(),this._input.dispatchEvent(new InputEvent("change"))}clearDrag(){document.body.classList.remove("control-knob__drag-active"),this._container.classList.remove("drag-active"),this._activeDrag=!1,this._input.dispatchEvent(new InputEvent("change")),document.body.removeEventListener("mousemove",this._handlers.mouseMove),document.body.removeEventListener("mouseup",this._handlers.mouseUp),document.body.removeEventListener("touchmove",this._handlers.touchMove),document.body.removeEventListener("touchend",this._handlers.touchEnd),document.body.removeEventListener("touchcancel",this._handlers.touchCancel)}updateToInputValue(){var t=this.normalizeValue(parseFloat(this._input.value));this.updateVisuals(t)}updateFromDrag(t,e){var i=this.clampValue(this._prevValue-t/e);this._input.value=i,this.updateVisuals(this.normalizeValue(i))}clampValue(t){var e=parseFloat(this._input.min),i=parseFloat(this._input.max);return Math.min(Math.max(t,e),i)}normalizeValue(t){var e=parseFloat(this._input.min);return(t-e)/(parseFloat(this._input.max)-e)}findActiveTouch(t){var e,i;for(e=0,i=t.length;e<i;e++)if(this._activeDrag===t.item(e).identifier)return t.item(e);return null}addEventListener(){this._input.addEventListener.apply(this._input,arguments)}removeEventListener(){this._input.removeEventListener.apply(this._input,arguments)}focus(){this._input.focus.apply(this._input,arguments)}blur(){this._input.blur.apply(this._input,arguments)}get value(){return parseFloat(this._input.value)}set value(t){this._input.value=t,this.updateToInputValue(),this._input.dispatchEvent(new Event("change"))}}e.default=s},function(t,e,i){"use strict";function n(t){for(var e=0;e<t.length;e++)if(void 0!==document.body.style[t[e]])return t[e];return null}function s(){return n(["transform","msTransform","webkitTransform","mozTransform","oTransform"])}e.a=s;s()}]).default;